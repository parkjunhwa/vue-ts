<script lang="ts" setup>
import type { Notification } from "@layouts/types";

const notifications = ref<Notification[]>([
  {
    id: 1,
    title: "ê°€ìž…ì„ì„ì¶•í•˜ë“œë¦½ë‹ˆë‹¤ ðŸŽ‰",
    subtitle: "ê°€ìž…ì¸ì‚¬",
    time: "ì˜¤ëŠ˜",
    isSeen: true,
  },
  {
    id: 2,
    title: "ê°œì¸ì •ë³´ ìˆ˜ì •.",
    subtitle: "5 ì‹œê°„ ì „",
    time: "ì–´ì œ",
    isSeen: false,
  },
  {
    id: 3,
    title: "ìƒˆë¡œìš´ ë©”ì‹œì§€ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤.ðŸ‘‹ðŸ»",
    subtitle: "ì½ì§€ ì•Šì€ ë©”ì‹œì§€ 10ê°œ",
    time: "11ì›” 11ì¼",
    isSeen: true,
  },
  {
    id: 4,
    title: "ìƒˆë¡œìš´ ë©”ì‹œì§€ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤.ðŸ‘‹ðŸ»",
    subtitle: "ì½ì§€ ì•Šì€ ë©”ì‹œì§€ 10ê°œ",
    time: "11ì›” 11ì¼",
    isSeen: true,
  },
  {
    id: 5,
    title: "ìƒˆë¡œìš´ ë©”ì‹œì§€ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤.ðŸ‘‹ðŸ»",
    subtitle: "ì½ì§€ ì•Šì€ ë©”ì‹œì§€ 10ê°œê°œ",
    time: "11ì›” 11ì¼",
    isSeen: true,
  },
]);

const removeNotification = (notificationId: number) => {
  notifications.value.forEach((item, index) => {
    if (notificationId === item.id) notifications.value.splice(index, 1);
  });
};

const markRead = (notificationId: number[]) => {
  notifications.value.forEach((item) => {
    notificationId.forEach((id) => {
      if (id === item.id) item.isSeen = true;
    });
  });
};

const markUnRead = (notificationId: number[]) => {
  notifications.value.forEach((item) => {
    notificationId.forEach((id) => {
      if (id === item.id) item.isSeen = false;
    });
  });
};

const handleNotificationClick = (notification: Notification) => {
  if (!notification.isSeen) markRead([notification.id]);
};
</script>

<template>
  <Notifications
    :notifications="notifications"
    @remove="removeNotification"
    @read="markRead"
    @unread="markUnRead"
    @click:notification="handleNotificationClick"
  />
</template>
